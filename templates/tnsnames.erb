<% @tns_entries = scope().call_function('hiera_hash',['tns_entries']) -%>

<%# This is how you do a comment block %>
<%
=begin %>
<% @tns_entries.each do | _entry, _values | -%>
	<%= _entry %> : <%= _values['address'] %>
<% end -%>
<%
=end %>

<%= @facts['sid'] %> = 
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 10.47.74.188)(PORT = 2616)) 
     (CONNECT_DATA = 
       (SERVER = DEDICATED)
       (SID = <%= @facts['sid'] %>)
     )
   )


<% @tns_entries.each do | v_entry, v_values | -%> 
	<%= v_entry %>.IVV = 
  (DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP)(HOST = <%= v_values['address'] %>)(PORT = <%= v_values['port'] %>))
      (CONNECT_DATA =
        (SERVER = DEDICATED)
	(SID = <%= $v_values['connection_name'] %>)
      )
  )
<% end -%>

